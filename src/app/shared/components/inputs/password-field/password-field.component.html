<section class="flex flex-col w-full gap-1.5" [class.dark]="theme === 'dark'">
  @if (props.label && props.labelLoc !== "hide") {
    <p
      class="text-sm text-foreground mb-1"
      [ngClass]="{
        '!text-destructive': fControl.errors && fControl.dirty,
      }"
    >
      {{ props!.label }}
    </p>
  }

  <div class="relative flex items-center w-full">
    <input
      class="bg-transparent text-foreground text-sm py-2 pl-3 pr-11 transition-all duration-75 ease-delay-in-burst rounded-xl w-full border outline-primary hover:outline-2 hover:outline-offset-2 focus:outline-2 focus:outline-offset-2"
      [type]="showPassword() ? 'text' : 'password'"
      [placeholder]="props.placeholder ?? ''"
      [formControl]="fControl"
      [disabled]="disabled"
      [ngClass]="{
        'border-destructive hover:outline-destructive focus:outline-destructive':
          fControl.errors && fControl.dirty,
      }"
    />
    <button
      class="group absolute top-1.3 right-2 cursor-pointer z-[2] h-[32px] w-[32px] transition-all duration-75 ease-delay-in-burst flex items-center justify-center rounded-full"
      [disabled]="disabled"
      (click)="showPassword.set(!showPassword())"
    >
      <ng-icon
        [name]="showPasswordIcon()"
        class="[&>*]:fill-foreground group-hover:[&>*]:fill-foreground/65"
      ></ng-icon>
    </button>
  </div>

  <div class="flex items-center py-1">
    <app-input-error
      [ngClass]="{ visible: showError, invisible: !showError }"
      [fControl]="fControl"
      [labelProps]="props.label"
    ></app-input-error>

    @if (showHint) {
      <small class="text-xs text-muted-foreground">{{ props.hint }}</small>
    }
  </div>
</section>
